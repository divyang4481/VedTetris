<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="VedTetris.MainPage">

    <Grid RowDefinitions="Auto, *, Auto, Auto" BackgroundColor="#2c3e50">
        
        <!-- Top bar with score, level, and pause button -->
        <Grid Grid.Row="0" ColumnDefinitions="*, Auto, Auto" Padding="10" BackgroundColor="#34495e">
            <StackLayout Grid.Column="0" Orientation="Horizontal" Spacing="15">
                <StackLayout>
                    <Label Text="SCORE" FontSize="14" TextColor="White" FontAttributes="Bold"/>
                    <Label x:Name="ScoreLabel" Text="0" FontSize="16" TextColor="#e74c3c" FontAttributes="Bold"/>
                </StackLayout>
                <StackLayout>
                    <Label Text="LEVEL" FontSize="14" TextColor="White" FontAttributes="Bold"/>
                    <Label x:Name="LevelLabel" Text="1" FontSize="16" TextColor="#2ecc71" FontAttributes="Bold"/>
                </StackLayout>
                <StackLayout>
                    <Label Text="LINES" FontSize="14" TextColor="White" FontAttributes="Bold"/>
                    <Label x:Name="LinesLabel" Text="0" FontSize="16" TextColor="#3498db" FontAttributes="Bold"/>
                </StackLayout>
            </StackLayout>
            
            <Button 
                Grid.Column="1"
                x:Name="SettingsButton" 
                Text="⚙️" 
                Clicked="SettingsButton_Clicked" 
                BackgroundColor="#95a5a6"
                TextColor="White"
                CornerRadius="10"
                WidthRequest="45"
                Margin="0,0,10,0"/>
            
            <Button 
                Grid.Column="2"
                x:Name="PauseButton" 
                Text="⏸️ Pause" 
                Clicked="PauseButton_Clicked" 
                BackgroundColor="#e67e22"
                TextColor="White"
                CornerRadius="10"/>
        </Grid>

        <!-- Main game area and side panels -->
        <Grid Grid.Row="1" ColumnDefinitions="Auto, *, Auto">
            
            <!-- Left side panel with hold piece -->
            <StackLayout Grid.Column="0" Margin="10,10,5,10" WidthRequest="100">
                <!-- Hold piece -->
                <Border BackgroundColor="#34495e" Padding="10" StrokeThickness="0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10"/>
                    </Border.StrokeShape>
                    <StackLayout>
                        <Label Text="HOLD" FontSize="16" TextColor="White" FontAttributes="Bold" HorizontalOptions="Center"/>
                        <GraphicsView x:Name="HoldPieceView" HeightRequest="80"/>
                        <Label Text="(H)" FontSize="12" TextColor="#95a5a6" HorizontalOptions="Center" Margin="0,5,0,0"/>
                    </StackLayout>
                </Border>
            </StackLayout>
            
            <!-- Main game board -->
            <GraphicsView x:Name="GameCanvas" Grid.Column="1" Margin="5,10"/>
            
            <!-- Right side panel with next piece and high score -->
            <StackLayout Grid.Column="2" Margin="5,10,10,10" WidthRequest="100">
                <!-- Next piece preview -->
                <Border BackgroundColor="#34495e" Padding="10" StrokeThickness="0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10"/>
                    </Border.StrokeShape>
                    <StackLayout>
                        <Label Text="NEXT" FontSize="16" TextColor="White" FontAttributes="Bold" HorizontalOptions="Center"/>
                        <GraphicsView x:Name="NextPieceView" HeightRequest="80"/>
                    </StackLayout>
                </Border>
                
                <!-- High Score -->
                <Border BackgroundColor="#34495e" Padding="10" Margin="0,10,0,0" StrokeThickness="0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10"/>
                    </Border.StrokeShape>
                    <StackLayout>
                        <Label Text="HI-SCORE" FontSize="16" TextColor="White" FontAttributes="Bold" HorizontalOptions="Center"/>
                        <Label x:Name="HighScoreLabel" Text="0" FontSize="16" TextColor="#f1c40f" FontAttributes="Bold" HorizontalOptions="Center"/>
                    </StackLayout>
                </Border>
                
                <!-- Statistics -->
                <Border BackgroundColor="#34495e" Padding="10" Margin="0,10,0,0" StrokeThickness="0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10"/>
                    </Border.StrokeShape>
                    <StackLayout>
                        <Label Text="STATS" FontSize="14" TextColor="White" FontAttributes="Bold" HorizontalOptions="Center"/>
                        <Label x:Name="TetrisCountLabel" Text="Tetris: 0" FontSize="12" TextColor="#9b59b6" HorizontalOptions="Center"/>
                        <Label x:Name="GameTimeLabel" Text="Time: 00:00" FontSize="12" TextColor="#95a5a6" HorizontalOptions="Center"/>
                    </StackLayout>
                </Border>
            </StackLayout>
        </Grid>

        <!-- Control buttons grid -->
        <Grid Grid.Row="2" ColumnDefinitions="*,*,*,*" Padding="10" ColumnSpacing="10">
            <Button Text="←" Grid.Column="0" Clicked="MoveLeft_Clicked" FontSize="Large" FontAttributes="Bold" BackgroundColor="#3498db" TextColor="White" CornerRadius="10" Padding="10,0">
                <Button.Shadow>
                    <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.3"/>
                </Button.Shadow>
            </Button>
            <Button Text="↻" Grid.Column="1" Clicked="Rotate_Clicked" FontSize="Large" FontAttributes="Bold" BackgroundColor="#e67e22" TextColor="White" CornerRadius="10" Padding="10,0">
                <Button.Shadow>
                    <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.3"/>
                </Button.Shadow>
            </Button>
            <Button Text="→" Grid.Column="2" Clicked="MoveRight_Clicked" FontSize="Large" FontAttributes="Bold" BackgroundColor="#3498db" TextColor="White" CornerRadius="10" Padding="10,0">
                <Button.Shadow>
                    <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.3"/>
                </Button.Shadow>
            </Button>
            <Button Text="H" Grid.Column="3" Clicked="Hold_Clicked" FontSize="Large" FontAttributes="Bold" BackgroundColor="#9b59b6" TextColor="White" CornerRadius="10" Padding="10,0">
                <Button.Shadow>
                    <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.3"/>
                </Button.Shadow>
            </Button>
        </Grid>

        <!-- Drop button -->
        <Button Text="↓" Grid.Row="3" Clicked="Drop_Clicked" FontSize="Large" FontAttributes="Bold" BackgroundColor="#e74c3c" TextColor="White" Margin="10,0,10,10" CornerRadius="10" Padding="10,0">
            <Button.Shadow>
                <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.3"/>
            </Button.Shadow>
        </Button>

    </Grid>

</ContentPage>
